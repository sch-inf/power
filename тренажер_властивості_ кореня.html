<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="UTF-8" />
  <title>–¢—Ä–µ–Ω–∞–∂–µ—Ä: –≤–ª–∞—Å—Ç–∏–≤–æ—Å—Ç—ñ –∫–≤–∞–¥—Ä–∞—Ç–Ω–æ–≥–æ –∫–æ—Ä–µ–Ω—è</title>

  <!-- MathJax -->
  <script>
    window.MathJax = {
      tex: { inlineMath: [['$', '$'], ['\\(', '\\)']] },
      svg: { fontCache: 'global' }
    };
  </script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js"></script>

  <style>
:root{
  --bg1:#e6f4f1;
  --bg2:#f4f8f6;
  --card:#ffffff;
  --accent:#3bbfad;
  --accent-dark:#2fa393;
}
*{box-sizing:border-box}
body{
  margin:0;
  min-height:100vh;
  display:flex;
  align-items:center;
  justify-content:center;
  font-family:system-ui,sans-serif;
  background:linear-gradient(135deg,var(--bg1),var(--bg2));
  color:#1f2933;
  line-height: 1.8;
  font-size: 16pt;
}
.wrapper{
  width:100%;
  padding:24px;
}
.card{
  max-width:760px;
  margin:auto;
  background:var(--card);
  border-radius:18px;
  padding:28px;
  box-shadow:0 12px 32px rgba(0,0,0,.08);
}
  h1,h2,h3{text-align:center;margin-top:0;line-height: 1.2;}
p{text-align:center}
.options{margin-top:16px}
.options label{display:flex;gap:8px;align-items:center;margin:10px 0;font-size:15px}
button{
  padding:12px 20px;
  border:none;
  border-radius:12px;
  background:var(--accent);
  color:#fff;
  font-size:16px;
  cursor:pointer;
  transition:.2s;
}
button:hover{background:var(--accent-dark);transform:translateY(-1px)}
.actions{display:flex;gap:12px;justify-content:center;flex-wrap:wrap;margin-top:20px}
.task{margin-top:24px;font-size:26px;text-align:center}
.answers{display:flex;flex-wrap:wrap;gap:12px;justify-content:center;margin-top:20px}
.answers button{min-width:110px}
.feedback{text-align:center;margin-top:16px;font-weight:600}
.stats,.timer{text-align:center;margin-top:12px;font-size:14px;color:#374151}
@media (max-width:720px){
  .wrapper{padding:12px}
  .card{padding:18px;border-radius:14px}
  .task{font-size:22px}
}
</style>
</head>
<body>

<div class="card" id="startScreen">
  <h1>–í–ª–∞—Å—Ç–∏–≤–æ—Å—Ç—ñ –∞—Ä–∏—Ñ–º–µ—Ç–∏—á–Ω–æ–≥–æ –∫–≤–∞–¥—Ä–∞—Ç–Ω–æ–≥–æ –∫–æ—Ä–µ–Ω—è</h1>
  <p>–û–±–µ—Ä—ñ—Ç—å, —è–∫—ñ –≤–ª–∞—Å—Ç–∏–≤–æ—Å—Ç—ñ —Ç—Ä–µ–Ω—É—î–º–æ:</p>

  <div class="options">
    <label><input type="checkbox" value="table" checked> –¢–∞–±–ª–∏—á–Ω—ñ –∑–Ω–∞—á–µ–Ω–Ω—è $\sqrt{a}$</label>
    <label><input type="checkbox" value="value"> –ó–Ω–∞—á–µ–Ω–Ω—è $\sqrt{a^2}$</label>
    <label><input type="checkbox" value="power"> $\sqrt{a^{2n}} = |a|^n$</label>
    <label><input type="checkbox" value="product"> $\sqrt{ab} = \sqrt a \cdot \sqrt b$</label>
    <label><input type="checkbox" value="fraction"> $\sqrt{\frac{a}{b}} = \frac{\sqrt a}{\sqrt b}$</label>
  </div>

  <button onclick="startTrainer()">üéì –¢—Ä–µ–Ω–∞–∂–µ—Ä</button>
  <button onclick="startExam()">üìù –†–æ–±–æ—Ç–∞ –Ω–∞ –æ—Ü—ñ–Ω–∫—É</button>
</div>

<div class="card" id="trainer" style="display:none;">
  <div class="timer" id="timer"></div>
  <div class="task" id="task"></div>
  <div class="answers" id="answers"></div>
  <div class="feedback" id="feedback"></div>
  <div class="stats" id="stats"></div>
</div>

<script>
let modes = [];
let examMode = false;
let examTimer = null;
let examTime = 30; // 5 —Ö–≤–∏–ª–∏–Ω
let examStats = {};
let total = 0;
let correct = 0;
let currentAnswer = null;

function rand(a, b) { return Math.floor(Math.random() * (b - a + 1)) + a; }

function startTrainer() {
  total = 0;
  examMode = false;
  modes = [...document.querySelectorAll('input[type=checkbox]:checked')].map(c => c.value);
  if (!modes.length) return alert('–û–±–µ—Ä—ñ—Ç—å —Ö–æ—á–∞ –± –æ–¥–Ω—É –≤–ª–∞—Å—Ç–∏–≤—ñ—Å—Ç—å');
  document.getElementById('startScreen').style.display = 'none';
  document.getElementById('trainer').style.display = 'block';
  nextTask();
}

function startExam() {
  
  total = 0;
  examMode = true;
  modes = ['table','value','power','product','fraction'];
  examStats = {};
  modes.forEach(m => examStats[m] = { correct: 0, total: 0 });

  document.getElementById('startScreen').style.display = 'none';
  document.getElementById('trainer').style.display = 'block';

  examTimer = setInterval(() => {
    examTime--;
    document.getElementById('timer').textContent = `–ß–∞—Å: ${Math.floor(examTime/60)}:${('0'+examTime%60).slice(-2)}`;
    if (examTime <= 0) {
      clearInterval(examTimer);
      showExamResults();
    }
  }, 1000);

  nextTask();
}

function nextTask() {
  
  total++;
  const mode = modes[rand(0, modes.length - 1)];
  if(examMode) examStats[mode].total++;

  document.getElementById('feedback').textContent = '';
  let taskLatex = '';
  let answers = [];

  if (mode === 'table') {
    const k = rand(0,16);
    const a = k*k;
    taskLatex = `\\sqrt{${a}}`;
    currentAnswer = `$${k}$`;
    answers = [`$${k}$`,`$${k+1}$`,`$${Math.max(0,k-1)}$`,`$${a}$`];
  }
  if (mode === 'value') {
    let a = rand(1,16); if(Math.random()<0.5) a=-a;
    taskLatex = `\\sqrt{(${a})^2}`;
    currentAnswer = `$${Math.abs(a)}$`;
    answers = [`$${Math.abs(a)}$`,`$${-Math.abs(a)}$`,`$${Math.abs(a)+1}$`,`$${Math.abs(a)-1}$`];
  }
  if (mode === 'power') {
    const a = rand(1,8)*(Math.random()<0.5?-1:1);
    const n = rand(1,4);
    taskLatex = `\\sqrt{${a}^{${2*n}}}`;
    currentAnswer = `$|${a}|^{${n}}$`;
    answers = [`$|${a}|^{${n}}$`,`$${a}^{${n}}$`,`$|${a}|^{${n-1}}$`,`$|${a}|^{${n+1}}$`];
  }
  if (mode === 'product') {
    const x = rand(1,6), y = rand(1,10), A = x*x, B = y*y;
    taskLatex = `\\sqrt{${A}\\cdot${B}}`;
    currentAnswer = `$${x}\\cdot${y}$`;
    answers = [`$${x}\\cdot${y}$`,`$${x+1}\\cdot${y+2}$`,`$${x}\\cdot${y+1}$`,`$${x+1}\\cdot${y}$`];
  }
  if (mode === 'fraction') {
    const x = rand(1,10), y = rand(1,6), A = x*x, B = y*y;
    taskLatex = `\\sqrt{\\frac{${A}}{${B}}}`;
    currentAnswer = `$\\frac{${x}}{${y}}$`;
    answers = [`$\\frac{${x}}{${y}}$`,`$\\frac{${A}}{${B}}$`,`$\\frac{${x+2}}{${y+1}}$`,`$\\frac{${x+1}}{${y+2}}$`];
  }

  answers = [...new Set(answers)].sort(()=>Math.random()-0.5).slice(0,4);
  document.getElementById('task').innerHTML = `–û–±—á–∏—Å–ª–∏: $${taskLatex}$`;
  renderAnswers(answers);
  MathJax.typeset();
  currentMode = mode;
}

function renderAnswers(list) {
  const box = document.getElementById('answers'); box.innerHTML='';
  list.forEach(v=>{const btn=document.createElement('button'); btn.innerHTML=v; btn.onclick=()=>check(v); box.appendChild(btn);});
}

function check(value){
  if(value===currentAnswer){
    correct++; if(examMode) examStats[currentMode].correct++;
    document.getElementById('feedback').textContent='‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ';
  } else {
    document.getElementById('feedback').textContent=`‚ùå –ü–æ–º–∏–ª–∫–∞. –ü—Ä–∞–≤–∏–ª—å–Ω–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥—å: ${currentAnswer}`;
  }
  document.getElementById('stats').textContent=`–í—Å—å–æ–≥–æ: ${total} | –ü—Ä–∞–≤–∏–ª—å–Ω–æ: ${correct}`;
  MathJax.typeset();
  setTimeout(nextTask, 1400);
}

function showExamResults(){
  document.getElementById('trainer').innerHTML='';
  let html=`<div class="card" id="resultScreen"><h2>–†–µ–∑—É–ª—å—Ç–∞—Ç–∏ —Ä–æ–±–æ—Ç–∏ –Ω–∞ –æ—Ü—ñ–Ω–∫—É</h2>`;
  html+=`</br>`;
  const totalTasks = Object.values(examStats).reduce((a,b)=>a+b.total,0);
  const totalCorrect = Object.values(examStats).reduce((a,b)=>a+b.correct,0);
  const percent = Math.round(totalCorrect/totalTasks*100);
  let grade=1;
  if(percent>=95) grade=12;
  else if(percent>=90) grade=11;
  else if(percent>=85) grade=10;
  else if(percent>=75) grade=9;
  else if(percent>=60) grade=8;
  else if(percent>=55) grade=7;
  else if(percent>=50) grade=6;
  else if(percent>=55) grade=5;
  else if(percent>=40) grade=4;
  else if(percent>=30) grade=3;
  else if(percent>=20) grade=2;
  else grade=1;
  html+=`<p>–û—Ü—ñ–Ω–∫–∞: <b>${grade}</b> (–í—ñ–¥—Å–æ—Ç–æ–∫ –ø—Ä–∞–≤–∏–ª—å–Ω–∏—Ö: ${percent}%)</p>`;
  html+=`<h3>–†–µ–∑—É–ª—å—Ç–∞—Ç–∏ –ø–æ —Ä–µ–∂–∏–º–∞—Ö:</h3><ul>`;
  for(const m in examStats){
    const p = examStats[m].total ? Math.round(examStats[m].correct/examStats[m].total*100) : 0;

    
  if (m == "table") name = `–¢–∞–±–ª–∏—á–Ω—ñ –∑–Ω–∞—á–µ–Ω–Ω—è \\(\\sqrt{a}\\)`;
  if (m == "value") name = `–ó–Ω–∞—á–µ–Ω–Ω—è \\(\\sqrt{a^2}\\)`;
  if (m == "power") name = `\\(\\sqrt{a^{2n}} = |a|^n\\)`;
  if (m == "product") name = `\\(\\sqrt{ab} = \\sqrt a \\cdot \\sqrt b\\)`;
  if (m == "fraction") name = `\\(\\sqrt{\\frac{a}{b}} = \\frac{\\sqrt a}{\\sqrt b}\\)`;
  
  // –í–∏–¥–∞–ª—è—î–º–æ –∑–∞–π–≤—ñ $$ –Ω–∞–≤–∫–æ–ª–æ ${name}, –æ—Å–∫—ñ–ª—å–∫–∏ –≤–æ–Ω–∏ –≤–∂–µ –≤—Å–µ—Ä–µ–¥–∏–Ω—ñ —Ä—è–¥–∫–∞
    html += `<li>${name} : ${p}% –ø—Ä–∞–≤–∏–ª—å–Ω–æ</li>`;
  }
  html+='</ul></div>';
  document.body.innerHTML=html;
 
    MathJax.typeset(); 
}
  
</script>

</body>
</html>
